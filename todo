mona
* andor, rix, multiopal, toucan, ib, im5k4, frantzen, multiseg in one drp, pgp4 xpm link problem?, hsd fex xface, papers, ami roi (epixhr), test live mode, check enabledrop, arp, procmgrd, fiber powers, new rogue, psmon ex, multiopal, opal exposure, new off-by-one, rack cooling, more drp nodes, x471 fex

phil ami requests:
pausing (online and offline? straightforward?)
event jumping (significant work)
rms (straightforward)
threshold, counting number of times pixel is above the threshold, either rolling buffer every 100 events or infinite (straightforward)
across or within runs: saving a static reference (XYPlot/Histogram/2DImage) and can be used as a red box (straightforward)
for ami to be able to control detector params need uniform xface for this (significant work)
reduce verbosity
an example for each of the above
update documentation (a video showing basic ami setup/running plus in-line documentation)

* managing sharing: readout groups, drp nodes, cnf files, timing system connections
 - Chris Ford is working on a shared-DAQ resource allocation manager
 - Matt Weaver has this big-optical-switch ("BOS") which is principle allows more flexible use of the shared DAQ nodes
 - right now we have rix/tmo "official" setups.  we should probably create another one for acr, and then another one for one-off setups (like what Bill Schlotter is doing tomorrow).
 - make drp nodes more uniform?
* configure andor with configdb?
* move TMO to xpm:2 (like RIX)
* reduction algorithms
* explore object stores for psana like ceph (mona)
* psana datasource for drp (mona)
* dump out all lcls2 config objects with psana (ro)
* fim link to xpm not locking (matt)
* avoid missing 1 second of epicsarch data at beginning of run
* multisegment epicsinfo in pvadetector
* ami controlling DRP ROI via configdb? (seshu)
* twocanary (toucan) in srcf
* code/results migration to/from nersc/sdf
* psmon only update one of multiplot (ddamiani)
* psana test to verify that all detector interfaces follow the rules
* psmon XYPlot format list of one item breaks multiple lines silently (ddamiani)
* consider adding "safe" Xtc::alloc with max-size argument to avoid fixed-buf overruns (or maybe in higher layer)
* off-by-one enabling automation (stoppers)
* xface for ami controlling detector params
* hsdioc needing restart (matt)
* hsd test pattern mode (matt)
* makepeds/calibrun regression tests and simplification or freeze? (mikhail)
* opals for different daq's on same machine (larry+pcds)
* fix psana1 test release LD_PRELOAD hack caused by removal of
  ' -Wl,--copy-dt-needed-entries -Wl,--enable-new-dtags'
  in SConsTools/psdm_cplusplus.py for gcc48.
* psana dbase access for live mode list of files
* ipmi support for psmetric (omar/it)
* clean up powercycling of xpm's: (some are fru_deactivate commands, others are different) (matt)
* handle bad external timing better? (matt)
* deadtime-per-detector in grafana
* generic detector calibration constants (e.g. manta)
* yves acremann detector
* teststand: kcu's to acc nodes (01,02,05,06), bring back ffb, fix ib manager and moving it to switch
** for phil: configdb_readxtc and compare configs (ro, caf)
* archon for rix (dan)
* improved psana1 tests (ro)
* lcls2 common-mode for panels in different gain ranges (mikhail)
* update rogue
* plims for lcls2
* mpi jobs not exiting if one core crashes
* put procstat in prometheus (or hard to duplicate all functionality?)
* how to deal with pickle in the calibdb? (mikhail)
* epicsarch support for strings (ric says it's hard)
* protect against use of keywords as epics aliases, consider using namespacing. write a sanitizer for epicsarch files (use "import keywords"?)
* send clearreadout to pvadetectors
* support uniform 3D arrays in areadetector interface
* remove git passwords for relmanage
* eliminate opal lcls1->lcls2 timing toggling (larry, ben)
* multiseg epics (kwargs or collection segids?) (mona)
* jungfrau/epix dark shot pedestals
* psana1: implement idx using smd
* correct setting for hyperthreading? (ric says important for MHz)
* psana2 idx mode
* psana1: add epix firmware id in epix id's for phil
* upgrade jupyterhub or use on-demand?
* general test that all public detector attributes are method taking event with return type (ro)
** support multiple cameras on one drp node
** one exe writing multiple files to improve performance
* move batch tests to slurm
** xtcdata duplicate names throw
* move away from afs (mv pdsdata/psalg repo)
* spares
** make everything work with Debug instead of RelWithDebInfo (valerio, ric)
* move readout group config info from segment levels to ts
* optionally don't record selected detectors to disk
* mikhail: roentdek with quadanode
* fix camlink converter box with opal where only one strip works (requires camlink powercycle)
* daq window placement
* parallelized calibrations (mikhail)
* state machine confusing (ric email) lower priority?
* monitor deadtime per-lane (matt)
* improved grafana (like ganglia)
* reduction algorithms (ric)
* move other hutches to lcls2
* allocation of readout groups and devices, lanes
** shared drp node allocation mechanism (caf)
* xpplr8116 geom calib const access for py3
* make hsd's more robust, e.g. timing dropouts (matt)
* LCLS2 drop shots (bykiks evtcode 161)
* MHz with real tmo analysis (mona)
* create more platforms for procmgr
* practice power outage
* parallel jupyterhub with visualization
* daq2 chunking (dan)
* lcls2 private calibdir (mikhail)
* portable gpu detector corrections (kokkos/hip/openmp/opencl?)
* deploy releases everywhere, containers? (valerio) (nersc, sdf, new/old psana1)
* unified/integrated timetool calibration
* fix failing new-style psana1 tests (valerio)
* shifter mounting permissions (mona, johannes)
* send multiple copy of events to shmem like lcls1
** small h5 ebeam/gasdet automatic storage (ro)
* small h5 ragged arrays
* meb (or later layer) broadcasts events to all clients (ami, python) (ric)
* read-while-write smallh5
* test daq sequences (caf)
* psana1 MTRX:V2 geometry (mikhail)
* update procServ (caf)
* slow updates need to obey deadtime (matt)
* setting msgdelay in timing system? (matt)
* syslog print throttling (caf)
* off-by-one (psana1/2) (ro)
* off-by-one support for low-rate devices
* units support in det xface
* put psana2 (and psana1?) on conda-forge
* calibdb dns issue (in travis macos build)
* replace travis
* in psana SRV callback only persist some fields to h5?
* once we have real data, work more on timetool calc in firmware
* dlopen for reduction alg
* scalable calib-fetch solution for shmem/drp
* sdf/nersc calib-dir sync (wilko)
* psana1: continuous integration of py3 (jenkins)
* lcls2 configdb tools: history (ro)
* algorithms (drp/ana, e.g. beam-center finding)
* singularity at slac
* support more python versions
* SDF support including ARP
* python DRP? (ric, matt)
* fiber power readings everywhere (matt, tid)
* peaknet
* ami:
  - josh: nanosecond xpcs: 2 pulse acqiris.  ratio of peak areas, correlation
    export results to ACR
  - josh: xpcs photon counting, working with chuck: accumulate statistics
    and then fit, number of photons per shot in histogram (talk to chuck
    and silke sxrm23). nicholas burdet (shared postdoc)
* timetool (ben): tag to front end, fiber power, toggle xpmini->lcls2 timing, clear readout
* simpler interface for controlling teb/meb?
* xtcav daq recording epics variables as well (and also bld values?)
* xtcav/psocake py3 compatible

**********************************************************************

remote support

* containers
  - additional layer of complexity
  - singularity support @psana
  - onDemand makes it simpler to activate containers
  - permissions
  - size/quotas
  - jupyter onDemand support (copy sdf, kubernetes?)
  - user-generated containers? (complexity)
  - release goal: oip, make a container, use it @lcls and sdf in batch/interactively
* need to work on syncing permissions/acls/groups
* identical directory structure problem solved by using containers
* support both user ad-hoc envs and lcls official envs

**********************************************************************

quynh issues:

New

quynh_l._nguyen  10:24 AM
It is Run 89 in LV45
10:25
below is the script for a time scan that did not save all the data Timescan= RE(continuous_scan(dets, lxt, -5.521973e-6,-5.521958e-6, step_value, -5.521973e-6,-5.521958e-6, num=101, duration=1200, sawtooth=True))
10:25
All the theta scans had the exact same slowness with initialization so I'll give you one of the script: Theta scan: RE(bp.scan(dets, a.crix_cryo_ry, 80, 117, step_value, 80, 117, 38))

christopher o'grady  10:28 AM
Cool # I will look at run 89 and Jyoti and I will look at the slowness.  It will take some time because of the various computing outages.  Thanks!

quynh_l._nguyen  10:28 AM
Do you want the run numbers for some of the theta scan?

christopher o'grady  10:29 AM
Sure, it may be useful if it's not too much trouble.

quynh_l._nguyen  10:29 AM
Run 96-99
10:30
Run 72, 73
10:30
Run 66, 67