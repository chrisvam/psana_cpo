mikhail config, ts xface, ami, detector list in logbook
* issues:
  - (done) event code 136 glitching bld daq hang (matt fixed?)
  - *hsd config race condition (matt)
  - *hsd training pattern
  - *ami issues: window-average, time history, red-box display, time-history, fix missing-data handling (lower priority), angular integration (lower priority)
  - (done)shmem copy l1accepts
  - state machine confusing (ric email) lower priority?
  - timetool? (lower priority)
  - no run 0 in control-gui
  - andor (medium) (integrate for 10 minutes?)
  - mona multirun
  - psana/ami survive "reset" (lower priority)
  - mona no endrun transition
  - ts det xface (high)
  - 30s ami load could be a scaling problem?
  - (done)ebeam bld
  - (done)eventcode conditionals
  - official names
  - *switch to valerio conda2
  - grafana page didn't load on tmo-daq (can't as tmoopr?)
  - grafana page cleaner?
  - use the system to debug
  - seaberg/heimann commissioning
  - *eventcode jumping
  - *set all hsd configs to be identical
  - *setting up user kernels
  - RIX
  - UED
  - monday: 5 quadanode + 1 kstov ued, wednesday: accelerator
    andor: variable line spectrometer (vls) 2 weeks
* debug shmem, epix cfg xtc2, ued example, asserts, zeromq, ami xpcs, lv96 translation, power cycling, daq alarms (boss, fibers 208-to-tmo, procmgr)
* new-style psana1:

 PHASE1:
 - (switch default to new-style: change /reg/g/psdm/etc/psconda.sh to new-style)
   o py2 by default
   o py3 if users choose (add -py3 option to psconda.sh)
 - understand new mpi? (e.g. IB segfaults) but cheetah suggests maybe OK
 - do at same time that we move to new nfs ("/cds")
 - keep the old style available if users desperately need it (old /reg/g/psdm/etc/psconda.sh becomes /reg/g/psdm/etc/psconda_old.sh)
 - calibman working (dark runs most important)
 - advertise reduced features to users: no psana modules, no old-style translator, no mpi-h5 mpi-pytables
 - move old-style/new-style to /cds
 - jenkins release (and nightly?) into new conda area

 PHASE2:
 - (freezing old-style psana1-py2, and merging branches)
 - merge py3->master and tag
 - merge anarel-manage (removing py3 hacks)
 - make a new branch master->old_style_master (could work off this)
 - judgment call: how much to increase test coverage?  testing is currently minimal.

* detectors: manta (rix exit slit), encoder, andor, epix, xtcav1, xtcav2
* for new-psana1:
  o slow conda activate (set PATH?) (valerio)
  o generic mpi (wait for slurm)
* prometheus python (eventually daq2 prometheus gui)
* MTRX:V2 (mikhail)
* reduction algorithms (ric)
* allocation of readout groups and devices, lanes
* Detector interface for filter_function and destination (mona)
* shared drp node allocation mechanism
* move to gcc9 (valerio)
* xpplr8116 geom calib const access for py3
* MHz with real tmo analysis (mona)
* protect against illegal python names in dotted-hierarchy (e.g. ClinkFeb[0])
* create more platforms for procmgr
* practice power outage
* debug shmem long-lived data corruption (pickN)
* detnames/detnames-minus-e within python
* parallel jupyterhub with visualization
* daq2 chunking
* lcls2 private calibdir (mikhail)
* encoder for rix
* portable gpu detector corrections (kokkos/hip/openmp/opencl?)
* deploy releases everywhere (nersc, sdf, new/old psana1)
* manta camera for rix
* have psana automatically detector which detectors are requested and only use those streams (mona)
* why don't we get a c++ exception when we receive a configdb timeout?
* unified/integrated timetool calibration
* move psana1 to mysql8 (not necessary since eliminating mysql?) (valerio)
* understand why we get corrupt pickN data if we don't copy l1accepts
* fix failing new-style psana1 tests (valerio)
* shifter mounting permissions (mona, johannes)
* problems on failure-modes confluence page
* disable IB in mpi until we understand intermittent crashes/warnings
* send multiple copy of events to shmem like lcls1
* small h5 ebeam/gasdet automatic storage
* small h5 ragged arrays
* test daq sequences (caf)
* psana1 MTRX:V2 geometry (mikhail)
* update procServ (caf)
* scan the configdb (caf)
* slow updates need to obey deadtime (matt)
* setting msgdelay in timing system? (matt)
* right now procmgr sets PATH to conda_rel.  could it "conda activate"?
* syslog print throttling
* move to use official conda rogue/epics (matt)
* expt/run number in control gui (mikhail)
* off-by-one (psana1/2)
* units support in det xface
* put psana2 (and psana1?) on conda-forge
* remote visualization/control
* calibdb dns issue (in travis macos build)
* psana hutch/exp specific algs (mona, silke, dan, seshu)
* in psana SRV callback only persist some fields to h5?
* once we have real data, work more on timetool calc in firmware
* dlopen for reduction alg
* test calibman/geo (mikhail)
* nersc calib-dir sync (wilko)
* in-line documentation tools for lcls2
* psana1: continuous integration of py3 (jenkins)
* configdb history
* algorithms (drp/ana, e.g. beam-center finding)
* psana startup slope, smd0 performance with small batch size, end-job poor behavior (mona)
* singularity at slac (mona)
* support more python versions
** python DRP? (matt)
* slurm and correcting problems with lsf
* slurm support in calibman (mikhail)
* andor
** consistent data format for opal/fakecam/xtcav.  Maybe not timetool since it's 1D.
* timetool: sometimes 1020, sometimes 1024 bytes (matt)
** canary: rack 11: 10G switch, IB, Rack 12: 2 IB switches (no 10G) 2 dell nodes (onsite)
** test power outages (ric, onsite)
* fiber power readings everywhere (matt, tid)
* peaknet
* ami bugs:
    - reloading graph caused projection to stop updating
    - reducing number of points in the line plot didn't take
    - wrong hsd scale by factor 10
* ami features: projection along curve, run on cmd line without json?, per-expt alg directory, angular integration, epics import + looping, travis, xarray reading, mpi offline/evt-jumping, subgraphs, gui regression (run graphs), web xface, combine coarse+fine(timetool) timing, edge case: graph surgery global operation (worker/collector1and2) disconnect/reconnect, mask generation, josh requests, hsd time axis, hover to get docstrings, performance monitoring (prometheus)?, reopen displays on graph load, default size larger, default symbol, scatter plot number of points too large, hide "configure" menu running online, make "apply" more obvious/easy, reset kills ami (likely psana), plot vs readable time, hover over plot to get point (1D, 2D)
  - josh: free-form scan (no steps)
  - alex: set scan bin size limits (is histogram ok?)
  - josh: nanosecond xpcs: 2 pulse acqiris.  ratio of peak areas, correlation
    export results to ACR
  - josh: xpcs photon counting, working with chuck: accumulate statistics
    and then fit, number of photons per shot in histogram (talk to chuck
    and silke sxrm23). nicholas burdet (shared postdoc)
  - alex: manta camera (allied vision):  project, fit a peak (gaussian),
    plot vs. other variable,  ideally integrate over events, but
    difficult for ami. 30Hz.  run in mode with only a single shot per image.
* timetool (ben): tag to front end, fiber power, toggle xpmini->lcls2 timing, clear readout
* simpler interface for controlling teb/meb?
* xtcav daq recording epics variables as well (and also bld values?) (matt)
* lcls2 areadetector (valerio+mikhail)
